{"ast":null,"code":"var _jsxFileName = \"/home/zik/my-ts/src/features/Temp/Tempmail.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, Suspense } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text } from '@react-three/drei';\nimport axios from 'axios';\nimport TrashIcon from '../../components/icons/TrashIcon';\nimport CopyIcon from '../../components//icons/CopyIcon';\nimport ArrowUpOn from '../../components/icons/ArrowUpOn';\nimport LoadingV2 from '../../components/icons/loadingV2';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TempMail = () => {\n  _s();\n  const [tempEmail, setTempEmail] = useState(null);\n  const [password, setPassword] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [selectedMessage, setSelectedMessage] = useState(null); // ✅ khai báo biến này\n  const [showEmailEffect, setShowEmailEffect] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [emailHistory, setEmailHistory] = useState([]);\n  const [remainingTime, setRemainingTime] = useState(0);\n  const copyEmailToClipboard = () => {\n    navigator.clipboard.writeText(tempEmail);\n    alert('Email đã được sao chép!');\n  };\n  const handleEmailEffectRest = () => {\n    setShowEmailEffect(false);\n  };\n  const createEmail = async () => {\n    try {\n      setLoading(true);\n      setSelectedMessage(null);\n      const res = await axios.post(\"http://localhost:8000/api/createmail\");\n      const email = res.data.data.name; // <-- Lấy đúng `email`\n      const createdAt = Date.now();\n      setTempEmail(email);\n      localStorage.setItem(\"currentTempEmail\", email);\n      localStorage.setItem(\"currentTempEmailCreatedAt\", createdAt);\n      setMessages([]);\n      setShowEmailEffect(true);\n      setLoading(false);\n      const oldEmails = JSON.parse(localStorage.getItem(\"emailHistory\")) || [];\n      const updatedEmails = [email, ...oldEmails.filter(e => e !== email)].slice(0, 20);\n      localStorage.setItem(\"emailHistory\", JSON.stringify(updatedEmails));\n      setEmailHistory(updatedEmails);\n    } catch (err) {\n      console.error(\"Lỗi tạo email:\", err);\n      alert(\"Không thể tạo email.\");\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    const savedEmail = localStorage.getItem(\"currentTempEmail\");\n    const createdAt = localStorage.getItem(\"currentTempEmailCreatedAt\");\n    const now = Date.now();\n    if (savedEmail && createdAt) {\n      const age = now - parseInt(createdAt, 10);\n      if (age < 10 * 60 * 1000) {\n        setTempEmail(savedEmail);\n      } else {\n        localStorage.removeItem(\"currentTempEmail\");\n        localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      }\n    }\n    const savedEmails = JSON.parse(localStorage.getItem(\"emailHistory\")) || [];\n    setEmailHistory(savedEmails);\n  }, []);\n  useEffect(() => {\n    if (!tempEmail) return;\n    const createdAt = parseInt(localStorage.getItem(\"currentTempEmailCreatedAt\") || \"0\", 10);\n    const now = Date.now();\n    const maxLife = 10 * 60 * 1000; // 10 phút\n    const timeLeft = maxLife - (now - createdAt);\n    if (timeLeft <= 0) {\n      alert(\"Email tạm thời đã hết hạn!\");\n      localStorage.removeItem(\"currentTempEmail\");\n      localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      setTempEmail(null);\n      return;\n    }\n    setRemainingTime(timeLeft);\n    let mailIntervalId;\n    let countdownIntervalId;\n    const startMailFetching = () => {\n      if (!mailIntervalId) {\n        mailIntervalId = setInterval(async () => {\n          try {\n            const mailRes = await axios.get(`http://localhost:8000/api/getmail/${tempEmail}?limit=50`);\n            setMessages(mailRes.data.data.inbox);\n          } catch (err) {\n            console.error(\"Lỗi khi lấy email:\", err);\n          }\n        }, 5000);\n      }\n    };\n    const stopMailFetching = () => {\n      if (mailIntervalId) {\n        clearInterval(mailIntervalId);\n        mailIntervalId = null;\n      }\n    };\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === \"visible\") {\n        startMailFetching();\n      } else {\n        stopMailFetching();\n      }\n    };\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n    if (document.visibilityState === \"visible\") {\n      startMailFetching();\n    }\n    const timeoutId = setTimeout(() => {\n      stopMailFetching();\n      alert(\"Email tạm thời đã hết hạn!\");\n      setTempEmail(null);\n      localStorage.removeItem(\"currentTempEmail\");\n      localStorage.removeItem(\"currentTempEmailCreatedAt\");\n    }, timeLeft);\n    countdownIntervalId = setInterval(() => {\n      setRemainingTime(prev => {\n        if (prev <= 1000) {\n          clearInterval(countdownIntervalId);\n          return 0;\n        }\n        return prev - 1000;\n      });\n    }, 1000);\n    return () => {\n      stopMailFetching();\n      clearTimeout(timeoutId);\n      clearInterval(countdownIntervalId);\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, [tempEmail]);\n  const handleDeleteEmail = async emailToDelete => {\n    const confirmDelete = window.confirm(`Bạn có chắc muốn xóa email ${emailToDelete}?`);\n    if (!confirmDelete) return;\n    try {\n      const response = await axios.delete(`http://localhost:8000/api/deletemail/${emailToDelete}`);\n      alert(response.data.message);\n\n      // Nếu email đang xem bị xóa, clear nó ra khỏi state\n      if (emailToDelete === tempEmail) {\n        setTempEmail(null);\n        setMessages([]);\n        localStorage.removeItem(\"currentTempEmail\");\n        localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      }\n\n      // Cập nhật lại lịch sử email (xóa email khỏi localStorage và state)\n      const updatedHistory = emailHistory.filter(e => e !== emailToDelete);\n      localStorage.setItem(\"emailHistory\", JSON.stringify(updatedHistory));\n      setEmailHistory(updatedHistory);\n    } catch (err) {\n      console.error(\"Lỗi khi xóa email:\", err);\n      alert(\"Xóa email thất bại!\");\n    }\n  };\n  const formatTime = ms => {\n    const totalSeconds = Math.floor(ms / 1000);\n    const minutes = String(Math.floor(totalSeconds / 60)).padStart(2, '0');\n    const seconds = String(totalSeconds % 60).padStart(2, '0');\n    return `${minutes}:${seconds}`;\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-20  bg-gray-100 text-gray-700 flex flex-col lg:flex-row w-full max-w-full mx-auto mt-3 gap-4  overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative flex flex-col  justify-center w-full h-screen font-sans text-white bg-[#0f0f0f] overflow-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative z-20 m-5 rounded-lg max-w-3xl bg-gray-100 bg-opacity-90 shadow-xl border border-gray-700 overflow-y-auto h-full max-h-[calc(100vh-40px)]\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold text-[#737777] text-center mb-6\",\n            children: \"TempMail zikdev.io.vn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), tempEmail && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"remaining-time\",\n            children: [\"\\u23F0 Email h\\u1EBFt h\\u1EA1n sau: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: formatTime(remainingTime)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6 p-4 border border-[#6c7172] rounded-md bg-[#222]\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-2 text-gray-300\",\n              children: \"\\u0110\\u1ECBa ch\\u1EC9 email t\\u1EA1m th\\u1EDDi c\\u1EE7a b\\u1EA1n:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center bg-[#111] p-3 rounded-md\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"break-all text-white\",\n                children: tempEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: copyEmailToClipboard,\n                className: \"ml-4 bg-[#737777] text-black px-4 py-2 rounded-md text-sm font-semibold hover:bg-[#a5acac] transition-colors\",\n                children: /*#__PURE__*/_jsxDEV(CopyIcon, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: createEmail,\n              className: \"mt-4 justify-center w-full bg-[#737777] text-black px-4 py-2 rounded-md text-base font-semibold hover:bg-[#a5acac] transition-colors\",\n              children: \"T\\u1EA1o email m\\u1EDBi\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-6 p-4 border border-[#737777] rounded-md bg-[#222]\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-xl font-bold text-[#737777] mb-4 text-center\",\n                children: \"Email \\u0111\\xE3 t\\u1EA1o g\\u1EA7n \\u0111\\xE2y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 17\n              }, this), emailHistory.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center text-gray-400\",\n                children: \"Ch\\u01B0a c\\xF3 email n\\xE0o \\u0111\\u01B0\\u1EE3c t\\u1EA1o.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-none p-0 max-h-48 overflow-y-auto space-y-2\",\n                children: emailHistory.map((email, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"bg-[#111] p-3 rounded-md flex justify-between items-center hover:bg-[#1f1f1f] transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    onClick: () => setTempEmail(email),\n                    className: \"text-white cursor-pointer hover:underline\",\n                    children: email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    style: {\n                      backgroundColor: '#a5acac'\n                    },\n                    onClick: () => handleDeleteEmail(email),\n                    className: \"ml-4 p-1 rounded hover:bg-[#222] transition\",\n                    title: \"Auto delete email in 3 days\",\n                    children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n                      width: 28,\n                      height: 28\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 25\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6 p-4 border border-[#737777] rounded-md bg-[#222]\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-[#737777] mb-4 text-center\",\n              children: \"H\\u1ED9p Th\\u01B0 \\u0110\\u1EBFn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex text-gray-400 justify-center  items-center\",\n              children: /*#__PURE__*/_jsxDEV(LoadingV2, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this) : !tempEmail ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-center text-gray-400\",\n              children: \"Nh\\u1EA5n \\\"T\\u1EA1o email m\\u1EDBi\\\" \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 17\n            }, this) : messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-center text-gray-400\",\n              children: \"Kh\\xF4ng c\\xF3 tin nh\\u1EAFn n\\xE0o. \\u0110ang ch\\u1EDD email...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-none p-0\",\n              children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => setSelectedMessage(msg) // ✅ sửa đúng\n                ,\n                className: \"bg-[#111] mb-2 p-3 rounded-md cursor-pointer hover:bg-[#1f1f1f] transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  className: \"text-lg text-white\",\n                  children: msg.subject\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"block text-gray-400 text-sm\",\n                  children: [\"T\\u1EEB: \", msg.from]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"block text-gray-500 text-xs mt-1\",\n                  children: new Date(msg.timestamp).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), selectedMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border border-[#737777] rounded-md bg-[#1a1a1a]\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-[#737777] mb-4 text-center\",\n              children: \"Chi Ti\\u1EBFt Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-2 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"text-cyan-200 \",\n                children: \"T\\u1EEB:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this), \" \", selectedMessage.from]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-4 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"text-cyan-200 \",\n                children: \"Ch\\u1EE7 \\u0111\\u1EC1:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this), \" \", selectedMessage.subject]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold text-cyan-200 text-sm\",\n              children: \"N\\u1ED9i dung:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 17\n            }, this), selectedMessage.html ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-[#111] p-3 rounded-md max-h-60 overflow-y-auto text-gray-200\",\n              dangerouslySetInnerHTML: {\n                __html: selectedMessage.html\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"bg-[#111] p-3 rounded-md max-h-60 overflow-y-auto text-gray-200 whitespace-pre-wrap text-sm\",\n              children: selectedMessage.body\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSelectedMessage(null),\n              className: \"flex justify-center items-center bg-gray-400 w-full\",\n              children: /*#__PURE__*/_jsxDEV(ArrowUpOn, {\n                style: {\n                  backgroundColor: \"#e5e7eb\",\n                  borderRadius: '50%',\n                  padding: '0.5rem'\n                },\n                width: 28,\n                height: 28\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full lg:w-[40%] bg-[#1a1a1a] rounded-lg p-4 border border-gray-700 shadow-xl overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold text-[#737777] mb-4 text-center\",\n          children: \"Th\\xF4ng tin Server\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-2 text-gray-300 text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83D\\uDFE2 Tr\\u1EA1ng th\\xE1i:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this), \" \\u0110ang ho\\u1EA1t \\u0111\\u1ED9ng\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83C\\uDF10 IP:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this), \" temp.zikdev.io\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83D\\uDD52 Uptime:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this), \" 12 ng\\xE0y 5 gi\\u1EDD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83D\\uDCE6 B\\u1ED9 nh\\u1EDB:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this), \" Loading...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83D\\uDCE8 Email x\\u1EED l\\xFD:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 17\n            }, this), \" \", emailHistory.length, \" email\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(TempMail, \"NoBytEO2fiJBzrmsFbWaUasPnIc=\");\n_c = TempMail;\nexport default TempMail;\nvar _c;\n$RefreshReg$(_c, \"TempMail\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Suspense","Canvas","useFrame","OrbitControls","Text","axios","TrashIcon","CopyIcon","ArrowUpOn","LoadingV2","jsxDEV","_jsxDEV","Fragment","_Fragment","TempMail","_s","tempEmail","setTempEmail","password","setPassword","messages","setMessages","selectedMessage","setSelectedMessage","showEmailEffect","setShowEmailEffect","loading","setLoading","emailHistory","setEmailHistory","remainingTime","setRemainingTime","copyEmailToClipboard","navigator","clipboard","writeText","alert","handleEmailEffectRest","createEmail","res","post","email","data","name","createdAt","Date","now","localStorage","setItem","oldEmails","JSON","parse","getItem","updatedEmails","filter","e","slice","stringify","err","console","error","savedEmail","age","parseInt","removeItem","savedEmails","maxLife","timeLeft","mailIntervalId","countdownIntervalId","startMailFetching","setInterval","mailRes","get","inbox","stopMailFetching","clearInterval","handleVisibilityChange","document","visibilityState","addEventListener","timeoutId","setTimeout","prev","clearTimeout","removeEventListener","handleDeleteEmail","emailToDelete","confirmDelete","window","confirm","response","delete","message","updatedHistory","formatTime","ms","totalSeconds","Math","floor","minutes","String","padStart","seconds","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","length","map","index","style","backgroundColor","title","width","height","msg","subject","from","timestamp","toLocaleString","html","dangerouslySetInnerHTML","__html","body","borderRadius","padding","_c","$RefreshReg$"],"sources":["/home/zik/my-ts/src/features/Temp/Tempmail.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, Suspense } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { OrbitControls, Text } from '@react-three/drei';\nimport axios from 'axios';\nimport TrashIcon from '../../components/icons/TrashIcon';\nimport CopyIcon from '../../components//icons/CopyIcon';\nimport ArrowUpOn from '../../components/icons/ArrowUpOn';\nimport LoadingV2 from '../../components/icons/loadingV2';\n\n\n\n\nconst TempMail = () => {\n  const [tempEmail, setTempEmail] = useState(null);\n  const [password, setPassword] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [selectedMessage, setSelectedMessage] = useState(null); // ✅ khai báo biến này\n  const [showEmailEffect, setShowEmailEffect] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [emailHistory, setEmailHistory] = useState([]);\n  const [remainingTime, setRemainingTime] = useState(0);\n\n\n  const copyEmailToClipboard = () => {\n    navigator.clipboard.writeText(tempEmail);\n    alert('Email đã được sao chép!');\n  };\n\n  const handleEmailEffectRest = () => {\n    setShowEmailEffect(false);\n  };\n\n  const createEmail = async () => {\n  try {\n    setLoading(true);\n    setSelectedMessage(null);\n    \n    const res = await axios.post(\"http://localhost:8000/api/createmail\");\n\n    const email = res.data.data.name;  // <-- Lấy đúng `email`\n    const createdAt = Date.now();\n\n    setTempEmail(email);\n    localStorage.setItem(\"currentTempEmail\", email);\n    localStorage.setItem(\"currentTempEmailCreatedAt\", createdAt);\n\n    setMessages([]);\n    setShowEmailEffect(true);\n    setLoading(false);\n\n    const oldEmails = JSON.parse(localStorage.getItem(\"emailHistory\")) || [];\n    const updatedEmails = [email, ...oldEmails.filter(e => e !== email)].slice(0, 20);\n    localStorage.setItem(\"emailHistory\", JSON.stringify(updatedEmails));\n    setEmailHistory(updatedEmails);\n  } catch (err) {\n    console.error(\"Lỗi tạo email:\", err);\n    alert(\"Không thể tạo email.\");\n    setLoading(false);\n  }\n};\n\n  useEffect(() => {\n    const savedEmail = localStorage.getItem(\"currentTempEmail\");\n    const createdAt = localStorage.getItem(\"currentTempEmailCreatedAt\");\n    const now = Date.now();\n\n    if (savedEmail && createdAt) {\n      const age = now - parseInt(createdAt, 10);\n      if (age < 10 * 60 * 1000) {\n        setTempEmail(savedEmail);\n      } else {\n        localStorage.removeItem(\"currentTempEmail\");\n        localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      }\n    }\n\n    const savedEmails = JSON.parse(localStorage.getItem(\"emailHistory\")) || [];\n    setEmailHistory(savedEmails);\n  }, []);\n\n\n  useEffect(() => {\n    if (!tempEmail) return;\n\n    const createdAt = parseInt(localStorage.getItem(\"currentTempEmailCreatedAt\") || \"0\", 10);\n    const now = Date.now();\n    const maxLife = 10 * 60 * 1000; // 10 phút\n    const timeLeft = maxLife - (now - createdAt);\n\n    if (timeLeft <= 0) {\n      alert(\"Email tạm thời đã hết hạn!\");\n      localStorage.removeItem(\"currentTempEmail\");\n      localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      setTempEmail(null);\n      return;\n    }\n\n    setRemainingTime(timeLeft);\n\n    let mailIntervalId;\n    let countdownIntervalId;\n\n    const startMailFetching = () => {\n      if (!mailIntervalId) {\n        mailIntervalId = setInterval(async () => {\n          try {\n            const mailRes = await axios.get(`http://localhost:8000/api/getmail/${tempEmail}?limit=50`);\n            setMessages(mailRes.data.data.inbox);\n\n          } catch (err) {\n            console.error(\"Lỗi khi lấy email:\", err);\n          }\n        }, 5000);\n      }\n    };\n\n    const stopMailFetching = () => {\n      if (mailIntervalId) {\n        clearInterval(mailIntervalId);\n        mailIntervalId = null;\n      }\n    };\n\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === \"visible\") {\n        startMailFetching();\n      } else {\n        stopMailFetching();\n      }\n    };\n\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n    if (document.visibilityState === \"visible\") {\n      startMailFetching();\n    }\n\n    const timeoutId = setTimeout(() => {\n      stopMailFetching();\n      alert(\"Email tạm thời đã hết hạn!\");\n      setTempEmail(null);\n      localStorage.removeItem(\"currentTempEmail\");\n      localStorage.removeItem(\"currentTempEmailCreatedAt\");\n    }, timeLeft);\n\n    countdownIntervalId = setInterval(() => {\n      setRemainingTime(prev => {\n        if (prev <= 1000) {\n          clearInterval(countdownIntervalId);\n          return 0;\n        }\n        return prev - 1000;\n      });\n    }, 1000);\n\n    return () => {\n      stopMailFetching();\n      clearTimeout(timeoutId);\n      clearInterval(countdownIntervalId);\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, [tempEmail]);\n\n  \n  const handleDeleteEmail = async (emailToDelete) => {\n    const confirmDelete = window.confirm(`Bạn có chắc muốn xóa email ${emailToDelete}?`);\n    if (!confirmDelete) return;\n  \n    try {\n      const response = await axios.delete(`http://localhost:8000/api/deletemail/${emailToDelete}`);\n      alert(response.data.message);\n  \n      // Nếu email đang xem bị xóa, clear nó ra khỏi state\n      if (emailToDelete === tempEmail) {\n        setTempEmail(null);\n        setMessages([]);\n        localStorage.removeItem(\"currentTempEmail\");\n        localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      }\n  \n      // Cập nhật lại lịch sử email (xóa email khỏi localStorage và state)\n      const updatedHistory = emailHistory.filter((e) => e !== emailToDelete);\n      localStorage.setItem(\"emailHistory\", JSON.stringify(updatedHistory));\n      setEmailHistory(updatedHistory);\n    } catch (err) {\n      console.error(\"Lỗi khi xóa email:\", err);\n      alert(\"Xóa email thất bại!\");\n    }\n  };\n    \n\n  const formatTime = (ms) => {\n    const totalSeconds = Math.floor(ms / 1000);\n    const minutes = String(Math.floor(totalSeconds / 60)).padStart(2, '0');\n    const seconds = String(totalSeconds % 60).padStart(2, '0');\n    return `${minutes}:${seconds}`;\n  };\n\n\n  return (\n    <>\n      \n      <div className=\"relative z-20  bg-gray-100 text-gray-700 flex flex-col lg:flex-row w-full max-w-full mx-auto mt-3 gap-4  overflow-hidden\">\n      \n        <div className=\"relative flex flex-col  justify-center w-full h-screen font-sans text-white bg-[#0f0f0f] overflow-hidden\">\n          \n\n\n          {/* Main content */}\n          <div className=\"relative z-20 m-5 rounded-lg max-w-3xl bg-gray-100 bg-opacity-90 shadow-xl border border-gray-700 overflow-y-auto h-full max-h-[calc(100vh-40px)]\">\n            <h1 className=\"text-3xl font-bold text-[#737777] text-center mb-6\">\n              TempMail zikdev.io.vn\n            </h1>\n            {tempEmail && (\n              <div className=\"remaining-time\">\n                ⏰ Email hết hạn sau: <strong>{formatTime(remainingTime)}</strong>\n              </div>\n            )}\n\n            <div className=\"mb-6 p-4 border border-[#6c7172] rounded-md bg-[#222]\">\n              <p className=\"mb-2 text-gray-300\">Địa chỉ email tạm thời của bạn:</p>\n              <div className=\"flex justify-between items-center bg-[#111] p-3 rounded-md\">\n                <strong className=\"break-all text-white\">{tempEmail}</strong>\n                <button\n                  onClick={copyEmailToClipboard}\n                  className=\"ml-4 bg-[#737777] text-black px-4 py-2 rounded-md text-sm font-semibold hover:bg-[#a5acac] transition-colors\"\n                >\n                  <CopyIcon size={18} />\n                </button>\n              </div>\n              <button\n                onClick={createEmail}\n                className=\"mt-4 justify-center w-full bg-[#737777] text-black px-4 py-2 rounded-md text-base font-semibold hover:bg-[#a5acac] transition-colors\"\n              >\n                Tạo email mới\n              </button>\n              <div className=\"mb-6 p-4 border border-[#737777] rounded-md bg-[#222]\">\n                <h2 className=\"text-xl font-bold text-[#737777] mb-4 text-center\">\n                  Email đã tạo gần đây\n                </h2>\n\n                {emailHistory.length === 0 ? (\n                  <p className=\"text-center text-gray-400\">Chưa có email nào được tạo.</p>\n                ) : (\n                  <ul className=\"list-none p-0 max-h-48 overflow-y-auto space-y-2\">\n                    {emailHistory.map((email, index) => (\n                      <li\n                        key={index}\n                        className=\"bg-[#111] p-3 rounded-md flex justify-between items-center hover:bg-[#1f1f1f] transition-colors\"\n                      >\n                        <span\n                          onClick={() => setTempEmail(email)}\n                          className=\"text-white cursor-pointer hover:underline\"\n                        >\n                          {email}\n                        </span>\n\n                        <button\n                          style={{\n                            backgroundColor: '#a5acac',\n                          }}\n                          onClick={() => handleDeleteEmail(email)}\n                          className=\"ml-4 p-1 rounded hover:bg-[#222] transition\"\n                          title=\"Auto delete email in 3 days\"\n                        >\n                          <TrashIcon\n\n\n                            width={28} height={28} />\n                        </button>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n              </div>\n            </div>\n\n            <div className=\"mb-6 p-4 border border-[#737777] rounded-md bg-[#222]\">\n              <h2 className=\"text-2xl font-bold text-[#737777] mb-4 text-center\">\n                Hộp Thư Đến\n              </h2>\n              {loading ? (\n                <div className=\"flex text-gray-400 justify-center  items-center\">\n                  <LoadingV2 size={24}\n                  \n                  />\n                  \n                </div>\n              ) : !tempEmail ? (\n                <p className=\"text-center text-gray-400\">Nhấn \"Tạo email mới\" để bắt đầu.</p>\n              ) : messages.length === 0 ? (\n                <p className=\"text-center text-gray-400\">Không có tin nhắn nào. Đang chờ email...</p>\n              ) : (\n\n                <ul className=\"list-none p-0\">\n                  {messages.map((msg, index) => (\n                    <li\n                      key={index}\n                      onClick={() => setSelectedMessage(msg)} // ✅ sửa đúng\n                      className=\"bg-[#111] mb-2 p-3 rounded-md cursor-pointer hover:bg-[#1f1f1f] transition-colors\"\n                    >\n                      <strong className=\"text-lg text-white\">{msg.subject}</strong>\n                      <span className=\"block text-gray-400 text-sm\">Từ: {msg.from}</span>\n                      <small className=\"block text-gray-500 text-xs mt-1\">\n                        {new Date(msg.timestamp).toLocaleString()}\n                      </small>\n                    </li>\n                  ))}\n                </ul>\n              )}\n            </div>\n\n            {selectedMessage && (\n              <div className=\"p-4 border border-[#737777] rounded-md bg-[#1a1a1a]\">\n                <h2 className=\"text-2xl font-bold text-[#737777] mb-4 text-center\">\n                  Chi Tiết Email\n                </h2>\n                <p className=\"mb-2 text-sm\">\n                  <strong className=\"text-cyan-200 \" >Từ:</strong> {selectedMessage.from}\n                </p>\n                <p className=\"mb-4 text-sm\">\n                  <strong className=\"text-cyan-200 \">Chủ đề:</strong> {selectedMessage.subject}\n                </p>\n                <p className=\"font-semibold text-cyan-200 text-sm\">Nội dung:</p>\n                {selectedMessage.html ? (\n                  <div\n                    className=\"bg-[#111] p-3 rounded-md max-h-60 overflow-y-auto text-gray-200\"\n                    dangerouslySetInnerHTML={{ __html: selectedMessage.html }}\n                  />\n                ) : (\n                  <p className=\"bg-[#111] p-3 rounded-md max-h-60 overflow-y-auto text-gray-200 whitespace-pre-wrap text-sm\">\n                    {selectedMessage.body}\n                  </p>\n                )}\n                <button\n                  onClick={() => setSelectedMessage(null)}\n                  className='flex justify-center items-center bg-gray-400 w-full'\n                >\n                  <ArrowUpOn style={{\n                    backgroundColor: \"#e5e7eb\",\n                    borderRadius: '50%',\n                    padding: '0.5rem',\n                  }} width={28} height={28}/>\n                </button>\n              </div>\n            )}\n          </div>\n\n        </div>\n\n        <div className=\"w-full lg:w-[40%] bg-[#1a1a1a] rounded-lg p-4 border border-gray-700 shadow-xl overflow-y-auto\">\n          <h2 className=\"text-xl font-bold text-[#737777] mb-4 text-center\">Thông tin Server</h2>\n          <ul className=\"space-y-2 text-gray-300 text-sm\">\n            <li><strong>🟢 Trạng thái:</strong> Đang hoạt động</li>\n            <li><strong>🌐 IP:</strong> temp.zikdev.io</li>\n            <li><strong>🕒 Uptime:</strong> 12 ngày 5 giờ</li>\n            <li><strong>📦 Bộ nhớ:</strong> Loading...</li>\n            <li><strong>📨 Email xử lý:</strong> {emailHistory.length} email</li>\n            {/* Thêm các dòng tùy ý */}\n          </ul>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default TempMail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}