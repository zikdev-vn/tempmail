{"ast":null,"code":"var _jsxFileName = \"/home/zik/my-ts/src/features/Temp/Tempmail.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, Suspense } from 'react';\nimport axios from 'axios';\nimport TrashIcon from '../../components/icons/TrashIcon';\nimport CopyIcon from '../../components/icons/CopyIcon';\nimport ArrowUpOn from '../../components/icons/ArrowUpOn';\nimport LoadingV2 from '../../components/icons/loadingV2';\nimport Button from \"../../components/Button/Button\";\nimport Refresh from '../../components/icons/Refresh';\nimport { gsap } from 'gsap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TempMail = () => {\n  _s();\n  const [tempEmail, setTempEmail] = useState(null);\n  const itemRef = useRef(null);\n  const [messages, setMessages] = useState([]);\n  const [selectedMessage, setSelectedMessage] = useState(null); // ✅ khai báo biến này\n  const [showEmailEffect, setShowEmailEffect] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [emailHistory, setEmailHistory] = useState([]);\n  const [remainingTime, setRemainingTime] = useState(0);\n  const copyEmailToClipboard = () => {\n    navigator.clipboard.writeText(tempEmail);\n    alert('Email đã được sao chép!');\n  };\n  const createEmail = async () => {\n    try {\n      setLoading(true);\n      setSelectedMessage(null);\n      const res = await axios.post(\"http://localhost:8000/api/createmail\");\n      const email = res.data.data.name; // <-- Lấy đúng `email`\n      const createdAt = Date.now();\n      setTempEmail(email);\n      localStorage.setItem(\"currentTempEmail\", email);\n      localStorage.setItem(\"currentTempEmailCreatedAt\", createdAt);\n      setMessages([]);\n      setShowEmailEffect(true);\n      setLoading(false);\n      const oldEmails = JSON.parse(localStorage.getItem(\"emailHistory\")) || [];\n      const updatedEmails = [email, ...oldEmails.filter(e => e !== email)].slice(0, 20);\n      localStorage.setItem(\"emailHistory\", JSON.stringify(updatedEmails));\n      setEmailHistory(updatedEmails);\n    } catch (err) {\n      console.error(\"Lỗi tạo email:\", err);\n      alert(\"Không thể tạo email.\");\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    const savedEmail = localStorage.getItem(\"currentTempEmail\");\n    const createdAt = localStorage.getItem(\"currentTempEmailCreatedAt\");\n    const now = Date.now();\n    if (savedEmail && createdAt) {\n      const age = now - parseInt(createdAt, 10);\n      if (age < 10 * 60 * 1000) {\n        setTempEmail(savedEmail);\n      } else {\n        localStorage.removeItem(\"currentTempEmail\");\n        localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      }\n    }\n    const savedEmails = JSON.parse(localStorage.getItem(\"emailHistory\")) || [];\n    setEmailHistory(savedEmails);\n  }, []);\n  useEffect(() => {\n    if (!tempEmail) return;\n    const createdAt = parseInt(localStorage.getItem(\"currentTempEmailCreatedAt\") || \"0\", 10);\n    const now = Date.now();\n    const maxLife = 10 * 60 * 1000; // 10 phút\n    const timeLeft = maxLife - (now - createdAt);\n    if (timeLeft <= 0) {\n      alert(\"Email tạm thời đã hết hạn!\");\n      localStorage.removeItem(\"currentTempEmail\");\n      localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      setTempEmail(null);\n      return;\n    }\n    setRemainingTime(timeLeft);\n    let mailIntervalId;\n    let countdownIntervalId;\n    const startMailFetching = () => {\n      if (!mailIntervalId) {\n        mailIntervalId = setInterval(async () => {\n          try {\n            const mailRes = await axios.get(`http://localhost:8000/api/getmail/${tempEmail}?limit=50`);\n            setMessages(mailRes.data.data.inbox);\n          } catch (err) {\n            console.error(\"Lỗi khi lấy email:\", err);\n          }\n        }, 5000);\n      }\n    };\n    const stopMailFetching = () => {\n      if (mailIntervalId) {\n        clearInterval(mailIntervalId);\n        mailIntervalId = null;\n      }\n    };\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === \"visible\") {\n        startMailFetching();\n      } else {\n        stopMailFetching();\n      }\n    };\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n    if (document.visibilityState === \"visible\") {\n      startMailFetching();\n    }\n    const timeoutId = setTimeout(() => {\n      stopMailFetching();\n      alert(\"Email tạm thời đã hết hạn!\");\n      setTempEmail(null);\n      localStorage.removeItem(\"currentTempEmail\");\n      localStorage.removeItem(\"currentTempEmailCreatedAt\");\n    }, timeLeft);\n    countdownIntervalId = setInterval(() => {\n      setRemainingTime(prev => {\n        if (prev <= 1000) {\n          clearInterval(countdownIntervalId);\n          return 0;\n        }\n        return prev - 1000;\n      });\n    }, 1000);\n    return () => {\n      stopMailFetching();\n      clearTimeout(timeoutId);\n      clearInterval(countdownIntervalId);\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, [tempEmail]);\n  const handleDeleteEmail = async emailToDelete => {\n    const confirmDelete = window.confirm(`Bạn có chắc muốn xóa email ${emailToDelete}?`);\n    if (!confirmDelete) return;\n    try {\n      const response = await axios.delete(`http://localhost:8000/api/deletemail/${emailToDelete}`);\n      alert(response.data.message);\n\n      // Nếu email đang xem bị xóa, clear nó ra khỏi state\n      if (emailToDelete === tempEmail) {\n        setTempEmail(null);\n        setMessages([]);\n        localStorage.removeItem(\"currentTempEmail\");\n        localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      }\n\n      // Cập nhật lại lịch sử email (xóa email khỏi localStorage và state)\n      const updatedHistory = emailHistory.filter(e => e !== emailToDelete);\n      localStorage.setItem(\"emailHistory\", JSON.stringify(updatedHistory));\n      setEmailHistory(updatedHistory);\n    } catch (err) {\n      console.error(\"Lỗi khi xóa email:\", err);\n      alert(\"Xóa email thất bại!\");\n    }\n  };\n  const formatTime = ms => {\n    const totalSeconds = Math.floor(ms / 1000);\n    const minutes = String(Math.floor(totalSeconds / 60)).padStart(2, '0');\n    const seconds = String(totalSeconds % 60).padStart(2, '0');\n    return `${minutes}:${seconds}`;\n  };\n  const handleExtendEmail = email => {\n    const now = Date.now();\n    localStorage.setItem(\"currentTempEmail\", email);\n    localStorage.setItem(\"currentTempEmailCreatedAt\", now.toString());\n    setTempEmail(email);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative z-20 bg-gray-100 text-gray-700 flex flex-col lg:flex-row w-full max-w-full mx-auto mt-3 gap-4 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative flex flex-col justify-center w-full h-screen font-sans bg-gray-100 overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative z-20 m-5 rounded-lg max-w-3xl bg-white shadow-xl border border-gray-300 overflow-y-auto h-full max-h-[calc(100vh-40px)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-center mb-6\",\n          children: \"TempMail zikdev.io.vn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 9\n        }, this), tempEmail && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"remaining-time text-gray-800 text-center\",\n          children: [\"\\u23F0 Email h\\u1EBFt h\\u1EA1n sau: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: formatTime(remainingTime)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6 p-4 border border-gray-300 rounded-md bg-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-2\",\n            children: \"\\u0110\\u1ECBa ch\\u1EC9 email t\\u1EA1m th\\u1EDDi c\\u1EE7a b\\u1EA1n:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center bg-gray-200 p-3 rounded-md\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"break-all\",\n              children: tempEmail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(CopyIcon, {\n              size: 24,\n              onClick: copyEmailToClipboard\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center p-3\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: createEmail,\n              className: \"mt-4 justify-center w-full bg-gray-300 text-gray-800 px-4 py-2 rounded-md text-base font-semibold hover:bg-gray-400 transition-colors\",\n              children: \"T\\u1EA1o email m\\u1EDBi\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6 p-4 border border-gray-300 rounded-md bg-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold mb-4 text-center\",\n              children: \"Email \\u0111\\xE3 t\\u1EA1o g\\u1EA7n \\u0111\\xE2y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 13\n            }, this), emailHistory.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-center text-gray-500\",\n              children: \"Ch\\u01B0a c\\xF3 email n\\xE0o \\u0111\\u01B0\\u1EE3c t\\u1EA1o.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 3\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-none p-0 max-h-48 overflow-y-auto space-y-2\",\n              children: emailHistory.map((email, index) => {\n                const handleAnimatedDelete = () => {\n                  gsap.to(itemRef.current, {\n                    opacity: 0,\n                    y: -20,\n                    duration: 0.3,\n                    onComplete: () => handleDeleteEmail(email)\n                  });\n                };\n                return /*#__PURE__*/_jsxDEV(\"li\", {\n                  ref: itemRef,\n                  className: \"bg-gray-200 p-3 rounded-md flex justify-between items-center hover:bg-gray-300 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    onClick: () => setTempEmail(email),\n                    className: \"cursor-pointer hover:underline\",\n                    children: email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex gap-3\",\n                    children: [/*#__PURE__*/_jsxDEV(TrashIcon, {\n                      onClick: handleAnimatedDelete,\n                      title: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 269,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Refresh, {\n                      width: 24,\n                      height: 24,\n                      onClick: () => handleExtendEmail(email)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 13\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 11\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 9\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 3\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6 p-4 border border-gray-300 rounded-md bg-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold mb-4 text-center\",\n            children: \"H\\u1ED9p Th\\u01B0 \\u0110\\u1EBFn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 11\n          }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center items-center text-gray-500\",\n            children: /*#__PURE__*/_jsxDEV(LoadingV2, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this) : !tempEmail ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-gray-500\",\n            children: \"Nh\\u1EA5n \\\"T\\u1EA1o email m\\u1EDBi\\\" \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this) : messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-gray-500\",\n            children: \"Kh\\xF4ng c\\xF3 tin nh\\u1EAFn n\\xE0o. \\u0110ang ch\\u1EDD email...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-none p-0\",\n            children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => setSelectedMessage(msg),\n              className: \"bg-gray-100 mb-2 p-3 rounded-md cursor-pointer hover:bg-gray-200 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"text-lg\",\n                children: msg.subject\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"block text-gray-600 text-sm\",\n                children: [\"T\\u1EEB: \", msg.from]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"block text-gray-500 text-xs mt-1\",\n                children: new Date(msg.timestamp).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 9\n        }, this), selectedMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border border-gray-300 rounded-md bg-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold mb-4 text-center\",\n            children: \"Chi Ti\\u1EBFt Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-2 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"text-gray-800\",\n              children: \"T\\u1EEB:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), \" \", selectedMessage.from]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-4 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"text-gray-800\",\n              children: \"Ch\\u1EE7 \\u0111\\u1EC1:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), \" \", selectedMessage.subject]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-semibold text-gray-800 text-sm mb-2\",\n            children: \"N\\u1ED9i dung:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), selectedMessage.html ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white p-3 rounded-md max-h-60 overflow-y-auto text-gray-700\",\n            dangerouslySetInnerHTML: {\n              __html: selectedMessage.html\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"bg-white p-3 rounded-md max-h-60 overflow-y-auto text-gray-700 whitespace-pre-wrap text-sm\",\n            children: selectedMessage.body\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSelectedMessage(null),\n            className: \"flex justify-center items-center bg-gray-300 w-full mt-4 hover:bg-gray-400 transition-colors py-2 rounded\",\n            children: /*#__PURE__*/_jsxDEV(ArrowUpOn, {\n              width: 24,\n              height: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full lg:w-[40%] bg-white rounded-lg p-4 border border-gray-300 shadow-xl overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold mb-4 text-center\",\n        children: \"Th\\xF4ng tin Server\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-2 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDFE2 Tr\\u1EA1ng th\\xE1i:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this), \" \\u0110ang ho\\u1EA1t \\u0111\\u1ED9ng\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83C\\uDF10 IP:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), \" temp.zikdev.io\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDD52 Uptime:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), \" 12 ng\\xE0y 5 gi\\u1EDD\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDCE6 B\\u1ED9 nh\\u1EDB:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), \" Loading...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDCE8 Email x\\u1EED l\\xFD:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this), \" \", emailHistory.length, \" email\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 204,\n    columnNumber: 3\n  }, this);\n};\n_s(TempMail, \"3lLBSj1yepwDbktbJFkSXA7C4Vk=\");\n_c = TempMail;\nexport default TempMail;\nvar _c;\n$RefreshReg$(_c, \"TempMail\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Suspense","axios","TrashIcon","CopyIcon","ArrowUpOn","LoadingV2","Button","Refresh","gsap","jsxDEV","_jsxDEV","TempMail","_s","tempEmail","setTempEmail","itemRef","messages","setMessages","selectedMessage","setSelectedMessage","showEmailEffect","setShowEmailEffect","loading","setLoading","emailHistory","setEmailHistory","remainingTime","setRemainingTime","copyEmailToClipboard","navigator","clipboard","writeText","alert","createEmail","res","post","email","data","name","createdAt","Date","now","localStorage","setItem","oldEmails","JSON","parse","getItem","updatedEmails","filter","e","slice","stringify","err","console","error","savedEmail","age","parseInt","removeItem","savedEmails","maxLife","timeLeft","mailIntervalId","countdownIntervalId","startMailFetching","setInterval","mailRes","get","inbox","stopMailFetching","clearInterval","handleVisibilityChange","document","visibilityState","addEventListener","timeoutId","setTimeout","prev","clearTimeout","removeEventListener","handleDeleteEmail","emailToDelete","confirmDelete","window","confirm","response","delete","message","updatedHistory","formatTime","ms","totalSeconds","Math","floor","minutes","String","padStart","seconds","handleExtendEmail","toString","className","children","fileName","_jsxFileName","lineNumber","columnNumber","size","onClick","length","map","index","handleAnimatedDelete","to","current","opacity","y","duration","onComplete","ref","title","width","height","msg","subject","from","timestamp","toLocaleString","html","dangerouslySetInnerHTML","__html","body","_c","$RefreshReg$"],"sources":["/home/zik/my-ts/src/features/Temp/Tempmail.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, Suspense } from 'react';\n\nimport axios from 'axios';\nimport TrashIcon from '../../components/icons/TrashIcon';\nimport CopyIcon from '../../components/icons/CopyIcon';\nimport ArrowUpOn from '../../components/icons/ArrowUpOn';\nimport LoadingV2 from '../../components/icons/loadingV2';\nimport Button from \"../../components/Button/Button\"\nimport Refresh from '../../components/icons/Refresh';\nimport { gsap } from 'gsap';\n\nconst TempMail = () => {\n  const [tempEmail, setTempEmail] = useState(null);\nconst itemRef = useRef(null);\n  const [messages, setMessages] = useState([]);\n  const [selectedMessage, setSelectedMessage] = useState(null); // ✅ khai báo biến này\n  const [showEmailEffect, setShowEmailEffect] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [emailHistory, setEmailHistory] = useState([]);\n  const [remainingTime, setRemainingTime] = useState(0);\n\n\n  const copyEmailToClipboard = () => {\n    navigator.clipboard.writeText(tempEmail);\n    alert('Email đã được sao chép!');\n  };\n\n\n\n  const createEmail = async () => {\n  try {\n    setLoading(true);\n    setSelectedMessage(null);\n    \n    const res = await axios.post(\"http://localhost:8000/api/createmail\");\n\n    const email = res.data.data.name;  // <-- Lấy đúng `email`\n    const createdAt = Date.now();\n\n    setTempEmail(email);\n    localStorage.setItem(\"currentTempEmail\", email);\n    localStorage.setItem(\"currentTempEmailCreatedAt\", createdAt);\n\n    setMessages([]);\n    setShowEmailEffect(true);\n    setLoading(false);\n\n    const oldEmails = JSON.parse(localStorage.getItem(\"emailHistory\")) || [];\n    const updatedEmails = [email, ...oldEmails.filter(e => e !== email)].slice(0, 20);\n    localStorage.setItem(\"emailHistory\", JSON.stringify(updatedEmails));\n    setEmailHistory(updatedEmails);\n  } catch (err) {\n    console.error(\"Lỗi tạo email:\", err);\n    alert(\"Không thể tạo email.\");\n    setLoading(false);\n  }\n};\n\n  useEffect(() => {\n    const savedEmail = localStorage.getItem(\"currentTempEmail\");\n    const createdAt = localStorage.getItem(\"currentTempEmailCreatedAt\");\n    const now = Date.now();\n\n    if (savedEmail && createdAt) {\n      const age = now - parseInt(createdAt, 10);\n      if (age < 10 * 60 * 1000) {\n        setTempEmail(savedEmail);\n      } else {\n        localStorage.removeItem(\"currentTempEmail\");\n        localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      }\n    }\n\n    const savedEmails = JSON.parse(localStorage.getItem(\"emailHistory\")) || [];\n    setEmailHistory(savedEmails);\n  }, []);\n\n\n  useEffect(() => {\n    if (!tempEmail) return;\n\n    const createdAt = parseInt(localStorage.getItem(\"currentTempEmailCreatedAt\") || \"0\", 10);\n    const now = Date.now();\n    const maxLife = 10 * 60 * 1000; // 10 phút\n    const timeLeft = maxLife - (now - createdAt);\n\n    if (timeLeft <= 0) {\n      alert(\"Email tạm thời đã hết hạn!\");\n      localStorage.removeItem(\"currentTempEmail\");\n      localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      setTempEmail(null);\n      return;\n    }\n\n    setRemainingTime(timeLeft);\n\n    let mailIntervalId;\n    let countdownIntervalId;\n\n    const startMailFetching = () => {\n      if (!mailIntervalId) {\n        mailIntervalId = setInterval(async () => {\n          try {\n            const mailRes = await axios.get(`http://localhost:8000/api/getmail/${tempEmail}?limit=50`);\n            setMessages(mailRes.data.data.inbox);\n\n          } catch (err) {\n            console.error(\"Lỗi khi lấy email:\", err);\n          }\n        }, 5000);\n      }\n    };\n\n    const stopMailFetching = () => {\n      if (mailIntervalId) {\n        clearInterval(mailIntervalId);\n        mailIntervalId = null;\n      }\n    };\n\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === \"visible\") {\n        startMailFetching();\n      } else {\n        stopMailFetching();\n      }\n    };\n\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n    if (document.visibilityState === \"visible\") {\n      startMailFetching();\n    }\n\n    const timeoutId = setTimeout(() => {\n      stopMailFetching();\n      alert(\"Email tạm thời đã hết hạn!\");\n      setTempEmail(null);\n      localStorage.removeItem(\"currentTempEmail\");\n      localStorage.removeItem(\"currentTempEmailCreatedAt\");\n    }, timeLeft);\n\n    countdownIntervalId = setInterval(() => {\n      setRemainingTime(prev => {\n        if (prev <= 1000) {\n          clearInterval(countdownIntervalId);\n          return 0;\n        }\n        return prev - 1000;\n      });\n    }, 1000);\n\n    return () => {\n      stopMailFetching();\n      clearTimeout(timeoutId);\n      clearInterval(countdownIntervalId);\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, [tempEmail]);\n\n  \n  const handleDeleteEmail = async (emailToDelete) => {\n    const confirmDelete = window.confirm(`Bạn có chắc muốn xóa email ${emailToDelete}?`);\n    if (!confirmDelete) return;\n  \n    try {\n      const response = await axios.delete(`http://localhost:8000/api/deletemail/${emailToDelete}`);\n      alert(response.data.message);\n  \n      // Nếu email đang xem bị xóa, clear nó ra khỏi state\n      if (emailToDelete === tempEmail) {\n        setTempEmail(null);\n        setMessages([]);\n        localStorage.removeItem(\"currentTempEmail\");\n        localStorage.removeItem(\"currentTempEmailCreatedAt\");\n      }\n  \n      // Cập nhật lại lịch sử email (xóa email khỏi localStorage và state)\n      const updatedHistory = emailHistory.filter((e) => e !== emailToDelete);\n      localStorage.setItem(\"emailHistory\", JSON.stringify(updatedHistory));\n      setEmailHistory(updatedHistory);\n    } catch (err) {\n      console.error(\"Lỗi khi xóa email:\", err);\n      alert(\"Xóa email thất bại!\");\n    }\n  };\n    \n\n  const formatTime = (ms) => {\n    const totalSeconds = Math.floor(ms / 1000);\n    const minutes = String(Math.floor(totalSeconds / 60)).padStart(2, '0');\n    const seconds = String(totalSeconds % 60).padStart(2, '0');\n    return `${minutes}:${seconds}`;\n  };\n\nconst handleExtendEmail = (email) => {\n  const now = Date.now();\n  localStorage.setItem(\"currentTempEmail\", email);\n  localStorage.setItem(\"currentTempEmailCreatedAt\", now.toString());\n  setTempEmail(email);\n};\n  return (\n    \n  <div className=\"relative z-20 bg-gray-100 text-gray-700 flex flex-col lg:flex-row w-full max-w-full mx-auto mt-3 gap-4 overflow-hidden\">\n    <div className=\"relative flex flex-col justify-center w-full h-screen font-sans bg-gray-100 overflow-hidden\">\n      <div className=\"relative z-20 m-5 rounded-lg max-w-3xl bg-white shadow-xl border border-gray-300 overflow-y-auto h-full max-h-[calc(100vh-40px)]\">\n        <h1 className=\"text-3xl font-bold text-center mb-6\">\n          TempMail zikdev.io.vn\n        </h1>\n        {tempEmail && (\n          <div className=\"remaining-time text-gray-800 text-center\">\n            ⏰ Email hết hạn sau: <strong>{formatTime(remainingTime)}</strong>\n          </div>\n        )}\n\n        <div className=\"mb-6 p-4 border border-gray-300 rounded-md bg-gray-100\">\n          <p className=\"mb-2\">Địa chỉ email tạm thời của bạn:</p>\n          <div className=\"flex justify-between items-center bg-gray-200 p-3 rounded-md\">\n            <strong className=\"break-all\">{tempEmail}</strong>\n            \n              <CopyIcon size={24}\n              onClick={copyEmailToClipboard}\n              />\n            \n          </div>\n          <div className=\"flex items-center justify-center p-3\">\n            <Button\n              onClick={createEmail}\n              className=\"mt-4 justify-center w-full bg-gray-300 text-gray-800 px-4 py-2 rounded-md text-base font-semibold hover:bg-gray-400 transition-colors\"\n            >\n              Tạo email mới\n            </Button>\n          </div>\n\n          <div className=\"mb-6 p-4 border border-gray-300 rounded-md bg-white\">\n            <h2 className=\"text-xl font-bold mb-4 text-center\">\n              Email đã tạo gần đây\n            </h2>\n\n            {emailHistory.length === 0 ? (\n  <p className=\"text-center text-gray-500\">Chưa có email nào được tạo.</p>\n) : (\n  <ul className=\"list-none p-0 max-h-48 overflow-y-auto space-y-2\">\n    {emailHistory.map((email, index) => {\n      \n\n      const handleAnimatedDelete = () => {\n        gsap.to(itemRef.current, {\n          opacity: 0,\n          y: -20,\n          duration: 0.3,\n          onComplete: () => handleDeleteEmail(email),\n        });\n      };\n\n      return (\n        <li\n          key={index}\n          ref={itemRef}\n          className=\"bg-gray-200 p-3 rounded-md flex justify-between items-center hover:bg-gray-300 transition-colors\"\n        >\n          <span\n            onClick={() => setTempEmail(email)}\n            className=\"cursor-pointer hover:underline\"\n          >\n            {email}\n          </span>\n          <div className=\"flex gap-3\">\n            <TrashIcon onClick={handleAnimatedDelete} title=\"Delete\" />\n            <Refresh\n              width={24}\n              height={24}\n              onClick={() => handleExtendEmail(email)}\n            />\n          </div>\n        </li>\n      );\n    })}\n  </ul>\n)}\n\n          </div>\n        </div>\n\n        <div className=\"mb-6 p-4 border border-gray-300 rounded-md bg-white\">\n          <h2 className=\"text-2xl font-bold mb-4 text-center\">\n            Hộp Thư Đến\n          </h2>\n          {loading ? (\n            <div className=\"flex justify-center items-center text-gray-500\">\n              <LoadingV2 size={24} />\n            </div>\n          ) : !tempEmail ? (\n            <p className=\"text-center text-gray-500\">Nhấn \"Tạo email mới\" để bắt đầu.</p>\n          ) : messages.length === 0 ? (\n            <p className=\"text-center text-gray-500\">Không có tin nhắn nào. Đang chờ email...</p>\n          ) : (\n            <ul className=\"list-none p-0\">\n              {messages.map((msg, index) => (\n                <li\n                  key={index}\n                  onClick={() => setSelectedMessage(msg)}\n                  className=\"bg-gray-100 mb-2 p-3 rounded-md cursor-pointer hover:bg-gray-200 transition-colors\"\n                >\n                  <strong className=\"text-lg\">{msg.subject}</strong>\n                  <span className=\"block text-gray-600 text-sm\">Từ: {msg.from}</span>\n                  <small className=\"block text-gray-500 text-xs mt-1\">\n                    {new Date(msg.timestamp).toLocaleString()}\n                  </small>\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n\n        {selectedMessage && (\n          <div className=\"p-4 border border-gray-300 rounded-md bg-gray-100\">\n            <h2 className=\"text-2xl font-bold mb-4 text-center\">\n              Chi Tiết Email\n            </h2>\n            <p className=\"mb-2 text-sm\">\n              <strong className=\"text-gray-800\">Từ:</strong> {selectedMessage.from}\n            </p>\n            <p className=\"mb-4 text-sm\">\n              <strong className=\"text-gray-800\">Chủ đề:</strong> {selectedMessage.subject}\n            </p>\n            <p className=\"font-semibold text-gray-800 text-sm mb-2\">Nội dung:</p>\n            {selectedMessage.html ? (\n              <div\n                className=\"bg-white p-3 rounded-md max-h-60 overflow-y-auto text-gray-700\"\n                dangerouslySetInnerHTML={{ __html: selectedMessage.html }}\n              />\n            ) : (\n              <p className=\"bg-white p-3 rounded-md max-h-60 overflow-y-auto text-gray-700 whitespace-pre-wrap text-sm\">\n                {selectedMessage.body}\n              </p>\n            )}\n            <button\n              onClick={() => setSelectedMessage(null)}\n              className=\"flex justify-center items-center bg-gray-300 w-full mt-4 hover:bg-gray-400 transition-colors py-2 rounded\"\n            >\n              <ArrowUpOn width={24} height={24} />\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n\n    <div className=\"w-full lg:w-[40%] bg-white rounded-lg p-4 border border-gray-300 shadow-xl overflow-y-auto\">\n      <h2 className=\"text-xl font-bold mb-4 text-center\">Thông tin Server</h2>\n      <ul className=\"space-y-2 text-sm\">\n        <li><strong>🟢 Trạng thái:</strong> Đang hoạt động</li>\n        <li><strong>🌐 IP:</strong> temp.zikdev.io</li>\n        <li><strong>🕒 Uptime:</strong> 12 ngày 5 giờ</li>\n        <li><strong>📦 Bộ nhớ:</strong> Loading...</li>\n        <li><strong>📨 Email xử lý:</strong> {emailHistory.length} email</li>\n      </ul>\n    </div>\n  </div>\n);\n\n};\n\nexport default TempMail;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEpE,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,kCAAkC;AACxD,OAAOC,QAAQ,MAAM,iCAAiC;AACtD,OAAOC,SAAS,MAAM,kCAAkC;AACxD,OAAOC,SAAS,MAAM,kCAAkC;AACxD,OAAOC,MAAM,MAAM,gCAAgC;AACnD,OAAOC,OAAO,MAAM,gCAAgC;AACpD,SAASC,IAAI,QAAQ,MAAM;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5B,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAMkB,OAAO,GAAGhB,MAAM,CAAC,IAAI,CAAC;EAC1B,MAAM,CAACiB,QAAQ,EAAEC,WAAW,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACqB,eAAe,EAAEC,kBAAkB,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAC9D,MAAM,CAACuB,eAAe,EAAEC,kBAAkB,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACyB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC2B,YAAY,EAAEC,eAAe,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAAC6B,aAAa,EAAEC,gBAAgB,CAAC,GAAG9B,QAAQ,CAAC,CAAC,CAAC;EAGrD,MAAM+B,oBAAoB,GAAGA,CAAA,KAAM;IACjCC,SAAS,CAACC,SAAS,CAACC,SAAS,CAAClB,SAAS,CAAC;IACxCmB,KAAK,CAAC,yBAAyB,CAAC;EAClC,CAAC;EAID,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACFV,UAAU,CAAC,IAAI,CAAC;MAChBJ,kBAAkB,CAAC,IAAI,CAAC;MAExB,MAAMe,GAAG,GAAG,MAAMjC,KAAK,CAACkC,IAAI,CAAC,sCAAsC,CAAC;MAEpE,MAAMC,KAAK,GAAGF,GAAG,CAACG,IAAI,CAACA,IAAI,CAACC,IAAI,CAAC,CAAE;MACnC,MAAMC,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;MAE5B3B,YAAY,CAACsB,KAAK,CAAC;MACnBM,YAAY,CAACC,OAAO,CAAC,kBAAkB,EAAEP,KAAK,CAAC;MAC/CM,YAAY,CAACC,OAAO,CAAC,2BAA2B,EAAEJ,SAAS,CAAC;MAE5DtB,WAAW,CAAC,EAAE,CAAC;MACfI,kBAAkB,CAAC,IAAI,CAAC;MACxBE,UAAU,CAAC,KAAK,CAAC;MAEjB,MAAMqB,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACK,OAAO,CAAC,cAAc,CAAC,CAAC,IAAI,EAAE;MACxE,MAAMC,aAAa,GAAG,CAACZ,KAAK,EAAE,GAAGQ,SAAS,CAACK,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKd,KAAK,CAAC,CAAC,CAACe,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;MACjFT,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEE,IAAI,CAACO,SAAS,CAACJ,aAAa,CAAC,CAAC;MACnEvB,eAAe,CAACuB,aAAa,CAAC;IAChC,CAAC,CAAC,OAAOK,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAAC;MACpCrB,KAAK,CAAC,sBAAsB,CAAC;MAC7BT,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAECzB,SAAS,CAAC,MAAM;IACd,MAAM0D,UAAU,GAAGd,YAAY,CAACK,OAAO,CAAC,kBAAkB,CAAC;IAC3D,MAAMR,SAAS,GAAGG,YAAY,CAACK,OAAO,CAAC,2BAA2B,CAAC;IACnE,MAAMN,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;IAEtB,IAAIe,UAAU,IAAIjB,SAAS,EAAE;MAC3B,MAAMkB,GAAG,GAAGhB,GAAG,GAAGiB,QAAQ,CAACnB,SAAS,EAAE,EAAE,CAAC;MACzC,IAAIkB,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE;QACxB3C,YAAY,CAAC0C,UAAU,CAAC;MAC1B,CAAC,MAAM;QACLd,YAAY,CAACiB,UAAU,CAAC,kBAAkB,CAAC;QAC3CjB,YAAY,CAACiB,UAAU,CAAC,2BAA2B,CAAC;MACtD;IACF;IAEA,MAAMC,WAAW,GAAGf,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACK,OAAO,CAAC,cAAc,CAAC,CAAC,IAAI,EAAE;IAC1EtB,eAAe,CAACmC,WAAW,CAAC;EAC9B,CAAC,EAAE,EAAE,CAAC;EAGN9D,SAAS,CAAC,MAAM;IACd,IAAI,CAACe,SAAS,EAAE;IAEhB,MAAM0B,SAAS,GAAGmB,QAAQ,CAAChB,YAAY,CAACK,OAAO,CAAC,2BAA2B,CAAC,IAAI,GAAG,EAAE,EAAE,CAAC;IACxF,MAAMN,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;IACtB,MAAMoB,OAAO,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;IAChC,MAAMC,QAAQ,GAAGD,OAAO,IAAIpB,GAAG,GAAGF,SAAS,CAAC;IAE5C,IAAIuB,QAAQ,IAAI,CAAC,EAAE;MACjB9B,KAAK,CAAC,4BAA4B,CAAC;MACnCU,YAAY,CAACiB,UAAU,CAAC,kBAAkB,CAAC;MAC3CjB,YAAY,CAACiB,UAAU,CAAC,2BAA2B,CAAC;MACpD7C,YAAY,CAAC,IAAI,CAAC;MAClB;IACF;IAEAa,gBAAgB,CAACmC,QAAQ,CAAC;IAE1B,IAAIC,cAAc;IAClB,IAAIC,mBAAmB;IAEvB,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;MAC9B,IAAI,CAACF,cAAc,EAAE;QACnBA,cAAc,GAAGG,WAAW,CAAC,YAAY;UACvC,IAAI;YACF,MAAMC,OAAO,GAAG,MAAMlE,KAAK,CAACmE,GAAG,CAAC,qCAAqCvD,SAAS,WAAW,CAAC;YAC1FI,WAAW,CAACkD,OAAO,CAAC9B,IAAI,CAACA,IAAI,CAACgC,KAAK,CAAC;UAEtC,CAAC,CAAC,OAAOhB,GAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEF,GAAG,CAAC;UAC1C;QACF,CAAC,EAAE,IAAI,CAAC;MACV;IACF,CAAC;IAED,MAAMiB,gBAAgB,GAAGA,CAAA,KAAM;MAC7B,IAAIP,cAAc,EAAE;QAClBQ,aAAa,CAACR,cAAc,CAAC;QAC7BA,cAAc,GAAG,IAAI;MACvB;IACF,CAAC;IAED,MAAMS,sBAAsB,GAAGA,CAAA,KAAM;MACnC,IAAIC,QAAQ,CAACC,eAAe,KAAK,SAAS,EAAE;QAC1CT,iBAAiB,CAAC,CAAC;MACrB,CAAC,MAAM;QACLK,gBAAgB,CAAC,CAAC;MACpB;IACF,CAAC;IAEDG,QAAQ,CAACE,gBAAgB,CAAC,kBAAkB,EAAEH,sBAAsB,CAAC;IAErE,IAAIC,QAAQ,CAACC,eAAe,KAAK,SAAS,EAAE;MAC1CT,iBAAiB,CAAC,CAAC;IACrB;IAEA,MAAMW,SAAS,GAAGC,UAAU,CAAC,MAAM;MACjCP,gBAAgB,CAAC,CAAC;MAClBtC,KAAK,CAAC,4BAA4B,CAAC;MACnClB,YAAY,CAAC,IAAI,CAAC;MAClB4B,YAAY,CAACiB,UAAU,CAAC,kBAAkB,CAAC;MAC3CjB,YAAY,CAACiB,UAAU,CAAC,2BAA2B,CAAC;IACtD,CAAC,EAAEG,QAAQ,CAAC;IAEZE,mBAAmB,GAAGE,WAAW,CAAC,MAAM;MACtCvC,gBAAgB,CAACmD,IAAI,IAAI;QACvB,IAAIA,IAAI,IAAI,IAAI,EAAE;UAChBP,aAAa,CAACP,mBAAmB,CAAC;UAClC,OAAO,CAAC;QACV;QACA,OAAOc,IAAI,GAAG,IAAI;MACpB,CAAC,CAAC;IACJ,CAAC,EAAE,IAAI,CAAC;IAER,OAAO,MAAM;MACXR,gBAAgB,CAAC,CAAC;MAClBS,YAAY,CAACH,SAAS,CAAC;MACvBL,aAAa,CAACP,mBAAmB,CAAC;MAClCS,QAAQ,CAACO,mBAAmB,CAAC,kBAAkB,EAAER,sBAAsB,CAAC;IAC1E,CAAC;EACH,CAAC,EAAE,CAAC3D,SAAS,CAAC,CAAC;EAGf,MAAMoE,iBAAiB,GAAG,MAAOC,aAAa,IAAK;IACjD,MAAMC,aAAa,GAAGC,MAAM,CAACC,OAAO,CAAC,8BAA8BH,aAAa,GAAG,CAAC;IACpF,IAAI,CAACC,aAAa,EAAE;IAEpB,IAAI;MACF,MAAMG,QAAQ,GAAG,MAAMrF,KAAK,CAACsF,MAAM,CAAC,wCAAwCL,aAAa,EAAE,CAAC;MAC5FlD,KAAK,CAACsD,QAAQ,CAACjD,IAAI,CAACmD,OAAO,CAAC;;MAE5B;MACA,IAAIN,aAAa,KAAKrE,SAAS,EAAE;QAC/BC,YAAY,CAAC,IAAI,CAAC;QAClBG,WAAW,CAAC,EAAE,CAAC;QACfyB,YAAY,CAACiB,UAAU,CAAC,kBAAkB,CAAC;QAC3CjB,YAAY,CAACiB,UAAU,CAAC,2BAA2B,CAAC;MACtD;;MAEA;MACA,MAAM8B,cAAc,GAAGjE,YAAY,CAACyB,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKgC,aAAa,CAAC;MACtExC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEE,IAAI,CAACO,SAAS,CAACqC,cAAc,CAAC,CAAC;MACpEhE,eAAe,CAACgE,cAAc,CAAC;IACjC,CAAC,CAAC,OAAOpC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEF,GAAG,CAAC;MACxCrB,KAAK,CAAC,qBAAqB,CAAC;IAC9B;EACF,CAAC;EAGD,MAAM0D,UAAU,GAAIC,EAAE,IAAK;IACzB,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAACH,EAAE,GAAG,IAAI,CAAC;IAC1C,MAAMI,OAAO,GAAGC,MAAM,CAACH,IAAI,CAACC,KAAK,CAACF,YAAY,GAAG,EAAE,CAAC,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;IACtE,MAAMC,OAAO,GAAGF,MAAM,CAACJ,YAAY,GAAG,EAAE,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;IAC1D,OAAO,GAAGF,OAAO,IAAIG,OAAO,EAAE;EAChC,CAAC;EAEH,MAAMC,iBAAiB,GAAI/D,KAAK,IAAK;IACnC,MAAMK,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;IACtBC,YAAY,CAACC,OAAO,CAAC,kBAAkB,EAAEP,KAAK,CAAC;IAC/CM,YAAY,CAACC,OAAO,CAAC,2BAA2B,EAAEF,GAAG,CAAC2D,QAAQ,CAAC,CAAC,CAAC;IACjEtF,YAAY,CAACsB,KAAK,CAAC;EACrB,CAAC;EACC,oBAEA1B,OAAA;IAAK2F,SAAS,EAAC,wHAAwH;IAAAC,QAAA,gBACrI5F,OAAA;MAAK2F,SAAS,EAAC,6FAA6F;MAAAC,QAAA,eAC1G5F,OAAA;QAAK2F,SAAS,EAAC,kIAAkI;QAAAC,QAAA,gBAC/I5F,OAAA;UAAI2F,SAAS,EAAC,qCAAqC;UAAAC,QAAA,EAAC;QAEpD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACJ7F,SAAS,iBACRH,OAAA;UAAK2F,SAAS,EAAC,0CAA0C;UAAAC,QAAA,GAAC,sCACnC,eAAA5F,OAAA;YAAA4F,QAAA,EAASZ,UAAU,CAAChE,aAAa;UAAC;YAAA6E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9D,CACN,eAEDhG,OAAA;UAAK2F,SAAS,EAAC,wDAAwD;UAAAC,QAAA,gBACrE5F,OAAA;YAAG2F,SAAS,EAAC,MAAM;YAAAC,QAAA,EAAC;UAA+B;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eACvDhG,OAAA;YAAK2F,SAAS,EAAC,8DAA8D;YAAAC,QAAA,gBAC3E5F,OAAA;cAAQ2F,SAAS,EAAC,WAAW;cAAAC,QAAA,EAAEzF;YAAS;cAAA0F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAS,CAAC,eAEhDhG,OAAA,CAACP,QAAQ;cAACwG,IAAI,EAAE,EAAG;cACnBC,OAAO,EAAEhF;YAAqB;cAAA2E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAED,CAAC,eACNhG,OAAA;YAAK2F,SAAS,EAAC,sCAAsC;YAAAC,QAAA,eACnD5F,OAAA,CAACJ,MAAM;cACLsG,OAAO,EAAE3E,WAAY;cACrBoE,SAAS,EAAC,uIAAuI;cAAAC,QAAA,EAClJ;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAENhG,OAAA;YAAK2F,SAAS,EAAC,qDAAqD;YAAAC,QAAA,gBAClE5F,OAAA;cAAI2F,SAAS,EAAC,oCAAoC;cAAAC,QAAA,EAAC;YAEnD;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,EAEJlF,YAAY,CAACqF,MAAM,KAAK,CAAC,gBACpCnG,OAAA;cAAG2F,SAAS,EAAC,2BAA2B;cAAAC,QAAA,EAAC;YAA2B;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,gBAExEhG,OAAA;cAAI2F,SAAS,EAAC,kDAAkD;cAAAC,QAAA,EAC7D9E,YAAY,CAACsF,GAAG,CAAC,CAAC1E,KAAK,EAAE2E,KAAK,KAAK;gBAGlC,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;kBACjCxG,IAAI,CAACyG,EAAE,CAAClG,OAAO,CAACmG,OAAO,EAAE;oBACvBC,OAAO,EAAE,CAAC;oBACVC,CAAC,EAAE,CAAC,EAAE;oBACNC,QAAQ,EAAE,GAAG;oBACbC,UAAU,EAAEA,CAAA,KAAMrC,iBAAiB,CAAC7C,KAAK;kBAC3C,CAAC,CAAC;gBACJ,CAAC;gBAED,oBACE1B,OAAA;kBAEE6G,GAAG,EAAExG,OAAQ;kBACbsF,SAAS,EAAC,kGAAkG;kBAAAC,QAAA,gBAE5G5F,OAAA;oBACEkG,OAAO,EAAEA,CAAA,KAAM9F,YAAY,CAACsB,KAAK,CAAE;oBACnCiE,SAAS,EAAC,gCAAgC;oBAAAC,QAAA,EAEzClE;kBAAK;oBAAAmE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACF,CAAC,eACPhG,OAAA;oBAAK2F,SAAS,EAAC,YAAY;oBAAAC,QAAA,gBACzB5F,OAAA,CAACR,SAAS;sBAAC0G,OAAO,EAAEI,oBAAqB;sBAACQ,KAAK,EAAC;oBAAQ;sBAAAjB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eAC3DhG,OAAA,CAACH,OAAO;sBACNkH,KAAK,EAAE,EAAG;sBACVC,MAAM,EAAE,EAAG;sBACXd,OAAO,EAAEA,CAAA,KAAMT,iBAAiB,CAAC/D,KAAK;oBAAE;sBAAAmE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACzC,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CAAC;gBAAA,GAjBDK,KAAK;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAkBR,CAAC;cAET,CAAC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CACL;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAEc,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENhG,OAAA;UAAK2F,SAAS,EAAC,qDAAqD;UAAAC,QAAA,gBAClE5F,OAAA;YAAI2F,SAAS,EAAC,qCAAqC;YAAAC,QAAA,EAAC;UAEpD;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EACJpF,OAAO,gBACNZ,OAAA;YAAK2F,SAAS,EAAC,gDAAgD;YAAAC,QAAA,eAC7D5F,OAAA,CAACL,SAAS;cAACsG,IAAI,EAAE;YAAG;cAAAJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpB,CAAC,GACJ,CAAC7F,SAAS,gBACZH,OAAA;YAAG2F,SAAS,EAAC,2BAA2B;YAAAC,QAAA,EAAC;UAAgC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,GAC3E1F,QAAQ,CAAC6F,MAAM,KAAK,CAAC,gBACvBnG,OAAA;YAAG2F,SAAS,EAAC,2BAA2B;YAAAC,QAAA,EAAC;UAAwC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,gBAErFhG,OAAA;YAAI2F,SAAS,EAAC,eAAe;YAAAC,QAAA,EAC1BtF,QAAQ,CAAC8F,GAAG,CAAC,CAACa,GAAG,EAAEZ,KAAK,kBACvBrG,OAAA;cAEEkG,OAAO,EAAEA,CAAA,KAAMzF,kBAAkB,CAACwG,GAAG,CAAE;cACvCtB,SAAS,EAAC,oFAAoF;cAAAC,QAAA,gBAE9F5F,OAAA;gBAAQ2F,SAAS,EAAC,SAAS;gBAAAC,QAAA,EAAEqB,GAAG,CAACC;cAAO;gBAAArB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC,eAClDhG,OAAA;gBAAM2F,SAAS,EAAC,6BAA6B;gBAAAC,QAAA,GAAC,WAAI,EAACqB,GAAG,CAACE,IAAI;cAAA;gBAAAtB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACnEhG,OAAA;gBAAO2F,SAAS,EAAC,kCAAkC;gBAAAC,QAAA,EAChD,IAAI9D,IAAI,CAACmF,GAAG,CAACG,SAAS,CAAC,CAACC,cAAc,CAAC;cAAC;gBAAAxB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpC,CAAC;YAAA,GARHK,KAAK;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OASR,CACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACL;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,EAELxF,eAAe,iBACdR,OAAA;UAAK2F,SAAS,EAAC,mDAAmD;UAAAC,QAAA,gBAChE5F,OAAA;YAAI2F,SAAS,EAAC,qCAAqC;YAAAC,QAAA,EAAC;UAEpD;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACLhG,OAAA;YAAG2F,SAAS,EAAC,cAAc;YAAAC,QAAA,gBACzB5F,OAAA;cAAQ2F,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAC;YAAG;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACxF,eAAe,CAAC2G,IAAI;UAAA;YAAAtB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnE,CAAC,eACJhG,OAAA;YAAG2F,SAAS,EAAC,cAAc;YAAAC,QAAA,gBACzB5F,OAAA;cAAQ2F,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACxF,eAAe,CAAC0G,OAAO;UAAA;YAAArB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1E,CAAC,eACJhG,OAAA;YAAG2F,SAAS,EAAC,0CAA0C;YAAAC,QAAA,EAAC;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,EACpExF,eAAe,CAAC8G,IAAI,gBACnBtH,OAAA;YACE2F,SAAS,EAAC,gEAAgE;YAC1E4B,uBAAuB,EAAE;cAAEC,MAAM,EAAEhH,eAAe,CAAC8G;YAAK;UAAE;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3D,CAAC,gBAEFhG,OAAA;YAAG2F,SAAS,EAAC,4FAA4F;YAAAC,QAAA,EACtGpF,eAAe,CAACiH;UAAI;YAAA5B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpB,CACJ,eACDhG,OAAA;YACEkG,OAAO,EAAEA,CAAA,KAAMzF,kBAAkB,CAAC,IAAI,CAAE;YACxCkF,SAAS,EAAC,2GAA2G;YAAAC,QAAA,eAErH5F,OAAA,CAACN,SAAS;cAACqH,KAAK,EAAE,EAAG;cAACC,MAAM,EAAE;YAAG;cAAAnB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENhG,OAAA;MAAK2F,SAAS,EAAC,4FAA4F;MAAAC,QAAA,gBACzG5F,OAAA;QAAI2F,SAAS,EAAC,oCAAoC;QAAAC,QAAA,EAAC;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACxEhG,OAAA;QAAI2F,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAC/B5F,OAAA;UAAA4F,QAAA,gBAAI5F,OAAA;YAAA4F,QAAA,EAAQ;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,uCAAe;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACvDhG,OAAA;UAAA4F,QAAA,gBAAI5F,OAAA;YAAA4F,QAAA,EAAQ;UAAM;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,mBAAe;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC/ChG,OAAA;UAAA4F,QAAA,gBAAI5F,OAAA;YAAA4F,QAAA,EAAQ;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,0BAAc;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClDhG,OAAA;UAAA4F,QAAA,gBAAI5F,OAAA;YAAA4F,QAAA,EAAQ;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAAW;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC/ChG,OAAA;UAAA4F,QAAA,gBAAI5F,OAAA;YAAA4F,QAAA,EAAQ;UAAe;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAAClF,YAAY,CAACqF,MAAM,EAAC,QAAM;QAAA;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAGR,CAAC;AAAC9F,EAAA,CA9VID,QAAQ;AAAAyH,EAAA,GAARzH,QAAQ;AAgWd,eAAeA,QAAQ;AAAC,IAAAyH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}